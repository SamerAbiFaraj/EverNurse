{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///C:/EverNurse-Project/evernurse-cv-matcher/src/app/api/candidates/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\r\nimport { readFile, writeFile } from 'fs/promises';\r\n\r\nexport async function DELETE(request: NextRequest) {\r\n    try {\r\n        const { searchParams } = new URL(request.url);\r\n        const id = searchParams.get('id');\r\n\r\n        if (!id) {\r\n            return NextResponse.json({ error: 'Candidate ID required' }, { status: 400 });\r\n        }\r\n\r\n        // Read database\r\n        const dbContent = await readFile('./uploads/database.json', 'utf-8');\r\n        const database = JSON.parse(dbContent);\r\n\r\n        // Check if candidate exists\r\n        const candidateIndex = database.candidates.findIndex((c: any) => c.id === id);\r\n\r\n        if (candidateIndex === -1) {\r\n            return NextResponse.json({ error: 'Candidate not found' }, { status: 404 });\r\n        }\r\n\r\n        // Remove candidate\r\n        const deletedCandidate = database.candidates.splice(candidateIndex, 1)[0];\r\n\r\n        // Remove associated matches\r\n        if (database.matches) {\r\n            database.matches = database.matches.filter((m: any) => m.candidateId !== id);\r\n        }\r\n\r\n        // Save database\r\n        await writeFile('./uploads/database.json', JSON.stringify(database, null, 2));\r\n\r\n        console.log(`üóëÔ∏è Deleted candidate: ${deletedCandidate.name} (${id})`);\r\n\r\n        return NextResponse.json({\r\n            success: true,\r\n            message: `Candidate ${deletedCandidate.name} deleted successfully`\r\n        });\r\n\r\n    } catch (error) {\r\n        console.error('‚ùå Error deleting candidate:', error);\r\n        return NextResponse.json(\r\n            { error: 'Failed to delete candidate' },\r\n            { status: 500 }\r\n        );\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,eAAe,OAAO,OAAoB;IAC7C,IAAI;QACA,MAAM,EAAE,YAAY,EAAE,GAAG,IAAI,IAAI,QAAQ,GAAG;QAC5C,MAAM,KAAK,aAAa,GAAG,CAAC;QAE5B,IAAI,CAAC,IAAI;YACL,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAwB,GAAG;gBAAE,QAAQ;YAAI;QAC/E;QAEA,gBAAgB;QAChB,MAAM,YAAY,MAAM,IAAA,iIAAQ,EAAC,2BAA2B;QAC5D,MAAM,WAAW,KAAK,KAAK,CAAC;QAE5B,4BAA4B;QAC5B,MAAM,iBAAiB,SAAS,UAAU,CAAC,SAAS,CAAC,CAAC,IAAW,EAAE,EAAE,KAAK;QAE1E,IAAI,mBAAmB,CAAC,GAAG;YACvB,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAsB,GAAG;gBAAE,QAAQ;YAAI;QAC7E;QAEA,mBAAmB;QACnB,MAAM,mBAAmB,SAAS,UAAU,CAAC,MAAM,CAAC,gBAAgB,EAAE,CAAC,EAAE;QAEzE,4BAA4B;QAC5B,IAAI,SAAS,OAAO,EAAE;YAClB,SAAS,OAAO,GAAG,SAAS,OAAO,CAAC,MAAM,CAAC,CAAC,IAAW,EAAE,WAAW,KAAK;QAC7E;QAEA,gBAAgB;QAChB,MAAM,IAAA,kIAAS,EAAC,2BAA2B,KAAK,SAAS,CAAC,UAAU,MAAM;QAE1E,QAAQ,GAAG,CAAC,CAAC,uBAAuB,EAAE,iBAAiB,IAAI,CAAC,EAAE,EAAE,GAAG,CAAC,CAAC;QAErE,OAAO,gJAAY,CAAC,IAAI,CAAC;YACrB,SAAS;YACT,SAAS,CAAC,UAAU,EAAE,iBAAiB,IAAI,CAAC,qBAAqB,CAAC;QACtE;IAEJ,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,+BAA+B;QAC7C,OAAO,gJAAY,CAAC,IAAI,CACpB;YAAE,OAAO;QAA6B,GACtC;YAAE,QAAQ;QAAI;IAEtB;AACJ"}}]
}